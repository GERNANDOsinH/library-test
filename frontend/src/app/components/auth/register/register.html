<div class="register-container">
  <h2>Registro de Usuario</h2>

  <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">

    <div class="form-group">
      <label for="first_name">Nombre</label>
      <input type="text" id="first_name" formControlName="first_name">
      @if (registerForm.get('first_name')?.invalid && registerForm.get('first_name')?.touched) {
        <div class="error-message">
          @if (registerForm.get('first_name')?.errors?.['required']) {
            <span>El nombre es obligatorio.</span>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="last_name">Apellido</label>
      <input type="text" id="last_name" formControlName="last_name">
      @if (registerForm.get('last_name')?.invalid && registerForm.get('last_name')?.touched) {
        <div class="error-message">
          @if (registerForm.get('last_name')?.errors?.['required']) {
            <span>El apellido es obligatorio.</span>
          }
        </div>
      }
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input type="email" id="email" formControlName="email">
      @if (registerForm.get('email')?.invalid && registerForm.get('email')?.touched) {
        <div class="error-message">
          @if (registerForm.get('email')?.errors?.['required']) {
            <span>El email es obligatorio.</span>
          }
          @if (registerForm.get('email')?.errors?.['email']) {
            <span>Debe ser un formato de email vÃ¡lido.</span>
          }
        </div>
      }
    </div>

    <div class="form-group password-group">
      <label for="password">ContraseÃ±a</label>
      <input 
        [type]="passwordVisible ? 'text' : 'password'" 
        id="password" 
        formControlName="password"
      >
      <button 
        type="button" 
        class="toggle-btn" 
        (click)="togglePasswordVisibility()"
        aria-label="Toggle password visibility"
      >
        {{ passwordVisible ? 'ğŸ‘ï¸' : 'ğŸ”’' }}
      </button>

      @if (registerForm.get('password')?.invalid && registerForm.get('password')?.touched) {
        <div class="error-message">
          @if (registerForm.get('password')?.errors?.['required']) {
            <span>La contraseÃ±a es obligatoria.</span>
          }
          @if (registerForm.get('password')?.errors?.['minlength']) {
            <span>La contraseÃ±a debe tener al menos 7 caracteres.</span>
          }
        </div>
      }
    </div>

    <div class="form-group password-group">
      <label for="repeatPassword">Repetir ContraseÃ±a</label>
      <input 
        [type]="repeatPasswordVisible ? 'text' : 'password'" 
        id="repeatPassword" 
        formControlName="repeatPassword"
      >
      <button 
        type="button" 
        class="toggle-btn" 
        (click)="toggleRepeatPasswordVisibility()"
        aria-label="Toggle repeat password visibility"
      >
        {{ repeatPasswordVisible ? 'ğŸ‘ï¸' : 'ğŸ”’' }}
      </button>

      @if (registerForm.get('repeatPassword')?.invalid && registerForm.get('repeatPassword')?.touched) {
        <div class="error-message">
          @if (registerForm.get('repeatPassword')?.errors?.['required']) {
            <span>Debe confirmar la contraseÃ±a.</span>
          }
          @if (registerForm.get('repeatPassword')?.errors?.['minlength']) {
            <span>La contraseÃ±a debe tener al menos 7 caracteres.</span>
          }
        </div>
      }

      @if (registerForm.errors?.['passwordsNotMatching'] && registerForm.get('repeatPassword')?.touched) {
        <div class="error-message">
          Las contraseÃ±as no coinciden.
        </div>
      }
    </div>

    <button type="submit" [disabled]="registerForm.invalid">
      Registrarse
    </button>
  </form>
</div>